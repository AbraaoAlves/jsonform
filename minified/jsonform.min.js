/* jsonform.js */
/*
 Copyright Milfont Consulting.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
(function(l){l.fn.extend({version:"1.2.0",getJSON:function(b){var d={},a=this,e;typeof b==="object"&&(e=b,b=e.byId?e.byId:false);a.find("input,textarea,select").each(function(c,f){var j=b?l.trim(f.id):l.trim(f.name);j!==""&&a.merge(d,a.buildJson(j,f.value,e))});return d},populate:function(b,d){var a=this;(function c(f,j){for(var h in f)if(f[h]||f[h]===0){var g=f[h];if(typeof g=="object"){var i=!j?h:j+"\\."+h;if(l.isArray(g))for(var b in g)g[b]&&(parent_arr=i+"\\["+b+"\\]",c(g[b],parent_arr));else c(g,
i)}else{var i=j?j+"\\."+h:h,k="[name='"+i+"']";d&&(k="#"+i);a.find(k).val(g)}}})(b);return this},buildJson:function(b,d,a){var e=a&&a.prefix?a.prefix:"",c=a&&a.suffix?a.suffix:"",f=function(a,b){var g;if(a.match(/\[(\d+)\]/)){g=a.match(/\[(\d+)\]/);var i=[];i[g[1]]=b;return i}else return b};return function h(a,b,d){var b=b.split("."),k=b.shift();a[e+k.replace(/\[(\d+)\]/,"")+c]=b.length>0?f(k,h({},b.join("."),d)):f(k,d);return a}({},b,d)},merge:function d(a,e){for(var c in e)typeof e[c]==="object"&&
typeof a[c]!=="undefined"?d(a[c],e[c]):a[c]=e[c];return a}})})(jQuery);