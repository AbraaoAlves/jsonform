/* jsonform.js */
/*
 Copyright Milfont Consulting.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
(function(k){k.fn.extend({version:"1.2.4",getJSON:function(d){var f={},a=this,h;"object"===typeof d&&(h=d,d=h.byId?h.byId:!1);a.find("input,textarea,select").each(function(c,b){if("radio"!=b.type||b.checked){var j=d?k.trim(b.id):k.trim(b.name),g="select-multiple"===b.type?k(b).val():b.value;""!==j&&("checkbox"==b.type&&(g=b.checked?!0:!1),a.merge(f,a.buildJson(j,g,h)))}});return f},populate:function(d,f){var a=this;(function c(b,j){for(var g in b)if(b[g]||0===b[g]){var i=b[g];if("object"==typeof i){var e=
!j?g:j+"\\."+g;if(k.isArray(i))for(var l in i)i[l]&&(parent_arr=e+"\\["+l+"\\]",c(i[l],parent_arr));else c(i,e)}else{var e=j?j+"\\."+g:g,d="[name='"+e+"']";f&&(d="#"+e);a.find(d).val(i)}}})(d);return this},buildJson:function(d,f,a){var h=a&&a.prefix?a.prefix:"",c=a&&a.suffix?a.suffix:"",b=function(a,b){var i=a.match(/\[(\d?)\]/);if(i){var e=[],c=0;""!==i[1].trim()&&(c=i[1]);e[c]=b;return e}return b};return function g(a,e,d){var e=e.split("."),f=e.shift();a[h+f.replace(/\[(\d?)\]/,"")+c]=0<e.length?
b(f,g({},e.join("."),d)):b(f,d);return a}({},d,f)},merge:function f(a,h){for(var c in h)"object"===typeof h[c]&&"undefined"!==typeof a[c]?f(a[c],h[c]):a[c]=h[c];return a}})})(jQuery);