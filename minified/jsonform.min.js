/* jsonform.js */
(function(k){k.fn.extend({version:"1.1.0",getJSON:function(b){var i={},a=this,e;typeof b==="object"&&(e=b,b=e.byId?e.byId:!1);a.find("input,textarea,select").each(function(f,j){var g=b?k.trim(j.id):k.trim(j.name);g!==""&&a.merge(i,a.buildJson(g,j.value,e))});return i},populate:function(b,i){var a=this;(function f(b,g){for(var c in b)if(b[c]||b[c]===0){var d=b[c];if(typeof d=="object"){var h=!g?c:g+"\\."+c;if(k.isArray(d))for(var l in d)d[l]&&(parent_arr=h+"\\["+l+"\\]",f(d[l],parent_arr));else f(d,
h)}else{var h=g?g+"\\."+c:c,m="[name='"+h+"']";i&&(m="#"+h);a.find(m).val(d)}}})(b);return this},buildJson:function(b,i,a){for(var b=b.split("."),e={},f=a&&a.prefix?a.prefix:"",a=a&&a.suffix?a.suffix:"",j=b.length;j>0;j--){var g={},c=b[j-1];if(c==b[b.length-1])g[c]=i;else{var d=c.search(/\[(\d+)\]/);if(d>-1){for(var h=c.substring(0,d),h=f+h+a,c=c.substring(d+1,c.indexOf("]")),h=g[h]=[],d=0;d<c;d++)h[d]={};h[c]=e}else g[f+c+a]=e}e=g}return e},merge:function i(a,e){for(var f in e)typeof e[f]==="object"&&
typeof a[f]!=="undefined"?i(a[f],e[f]):a[f]=e[f];return a},clone:function(i){return this.merge({},i)}})})(jQuery);