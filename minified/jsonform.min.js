/* jsonform.js */
(function(k){k.fn.extend({version:"1.0.0",getJSON:function(b){var h={},c=this,g;typeof b==="object"&&(g=b,b=!1);c.find("input,textarea,select").each(function(d,i){var a=b?k.trim(i.id):k.trim(i.name);a!==""&&c.merge(h,c.buildJson(a,i.value,g))});return h},populate:function(b,h){var c=this;(function d(b,a){for(var e in b)if(b[e]){var f=b[e];if(typeof f=="object"){var j=!a?e:a+"\\."+e;if(k.isArray(f))for(var l in f)f[l]&&(parent_arr=j+"\\["+l+"\\]",d(f[l],parent_arr));else d(f,j)}else{var j=a?a+"\\."+
e:e,m="[name='"+j+"']";h&&(m="#"+j);c.find(m).val(f)}}})(b);return this},buildJson:function(b,h,c){for(var b=b.split("."),g={},d=b.length;d>0;d--){var i={},a=b[d-1];if(a==b[b.length-1])i[a]=h;else{var e=a.search(/\[(\d+)\]/);if(e>-1){var f=a.substring(0,e);c&&c.prefix&&(f=c.prefix+f);a=a.substring(e+1,a.indexOf("]"));f=i[f]=[];for(e=0;e<a;e++)f[e]={};f[a]=g}else c&&c.prefix?i[c.prefix+a]=g:i[a]=g}g=i}return g},merge:function h(c,g){for(var d in g)typeof g[d]==="object"&&typeof c[d]!=="undefined"?
h(c[d],g[d]):c[d]=g[d];return c},clone:function(h){return this.merge({},h)}})})(jQuery);