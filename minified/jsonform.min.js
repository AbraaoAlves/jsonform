/* jsonform.js */
(function(j){j.fn.extend({version:"1.0.1",getJSON:function(a){var i={},c=this,h;typeof a==="object"&&(h=a,a=!1);c.find("input,textarea,select").each(function(e,f){var b=a?j.trim(f.id):j.trim(f.name);b!==""&&c.merge(i,c.buildJson(b,f.value,h))});return i},populate:function(a,i){var c=this;(function e(f,b){for(var d in f)if(f[d]||f[d]===0){var g=f[d];if(typeof g=="object"){var a=!b?d:b+"\\."+d;if(j.isArray(g))for(var k in g)g[k]&&(parent_arr=a+"\\["+k+"\\]",e(g[k],parent_arr));else e(g,a)}else{var a=
b?b+"\\."+d:d,l="[name='"+a+"']";i&&(l="#"+a);c.find(l).val(g)}}})(a);return this},buildJson:function(a,i,c){for(var a=a.split("."),h={},e=a.length;e>0;e--){var f={},b=a[e-1];if(b==a[a.length-1])f[b]=i;else{var d=b.search(/\[(\d+)\]/);if(d>-1){var g=b.substring(0,d);c&&c.prefix&&(g=c.prefix+g);b=b.substring(d+1,b.indexOf("]"));g=f[g]=[];for(d=0;d<b;d++)g[d]={};g[b]=h}else c&&c.prefix?f[c.prefix+b]=h:f[b]=h}h=f}return h},merge:function i(c,h){for(var e in h)typeof h[e]==="object"&&typeof c[e]!=="undefined"?
i(c[e],h[e]):c[e]=h[e];return c},clone:function(i){return this.merge({},i)}})})(jQuery);