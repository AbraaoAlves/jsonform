/* jsonform.js */
/*
 Copyright Milfont Consulting.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
(function(k){k.fn.extend({version:"1.1.1",getJSON:function(b){var d={},a=this,e;typeof b==="object"&&(e=b,b=e.byId?e.byId:!1);a.find("input,textarea,select").each(function(c,f){var j=b?k.trim(f.id):k.trim(f.name);j!==""&&a.merge(d,a.buildJson(j,f.value,e))});return d},populate:function(b,d){var a=this;(function c(f,j){for(var h in f)if(f[h]||f[h]===0){var g=f[h];if(typeof g=="object"){var i=!j?h:j+"\\."+h;if(k.isArray(g))for(var b in g)g[b]&&(parent_arr=i+"\\["+b+"\\]",c(g[b],parent_arr));else c(g,
i)}else{var i=j?j+"\\."+h:h,l="[name='"+i+"']";d&&(l="#"+i);a.find(l).val(g)}}})(b);return this},buildJson:function(b,d,a){var e=a&&a.prefix?a.prefix:"",c=a&&a.suffix?a.suffix:"",f=function(a,b){var c;if(c=a.match(/\[(\d+)\]/)){var i=[];i[c[1]]=b;return i}else return b};return function h(a,b,d){var b=b.split("."),k=b.shift();return function(a,g){a[e+g.replace(/\[(\d+)\]/,"")+c]=b.length>0?f(g,h({},b.join("."),d)):f(g,d);return a}(a,k)}({},b,d)},merge:function d(a,e){for(var c in e)typeof e[c]==="object"&&
typeof a[c]!=="undefined"?d(a[c],e[c]):a[c]=e[c];return a},clone:function(d){return this.merge({},d)}})})(jQuery);