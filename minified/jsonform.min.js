/* jsonform.js */
/*
 Copyright Milfont Consulting.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
(function(l){l.fn.extend({version:"1.1.1",getJSON:function(b){var c={},a=this,e;typeof b==="object"&&(e=b,b=e.byId?e.byId:false);a.find("input,textarea,select").each(function(d,f){var j=b?l.trim(f.id):l.trim(f.name);j!==""&&a.merge(c,a.buildJson(j,f.value,e))});return c},populate:function(b,c){var a=this;(function d(f,j){for(var h in f)if(f[h]||f[h]===0){var g=f[h];if(typeof g=="object"){var i=!j?h:j+"\\."+h;if(l.isArray(g))for(var b in g)g[b]&&(parent_arr=i+"\\["+b+"\\]",d(g[b],parent_arr));else d(g,
i)}else{var i=j?j+"\\."+h:h,k="[name='"+i+"']";c&&(k="#"+i);a.find(k).val(g)}}})(b);return this},buildJson:function(b,c,a){var e=a&&a.prefix?a.prefix:"",d=a&&a.suffix?a.suffix:"",f=function(a,b){var g;if(g=a.match(/\[(\d+)\]/)){var i=[];i[g[1]]=b;return i}else return b};return function h(a,b,c){var b=b.split("."),k=b.shift();a[e+k.replace(/\[(\d+)\]/,"")+d]=b.length>0?f(k,h({},b.join("."),c)):f(k,c);return a}({},b,c)},merge:function c(a,e){for(var d in e)typeof e[d]==="object"&&typeof a[d]!=="undefined"?
c(a[d],e[d]):a[d]=e[d];return a},clone:function(c){return this.merge({},c)}})})(jQuery);